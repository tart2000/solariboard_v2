<!doctype html>
<html>
<head>
  <title>Solari</title>
</head>
<body>
	<div id="container">
  </div>
  <script src="/lib/underscore.js"></script>
  <script src="/lib/Three.js"></script>
  <script src="/lib/stats.js"></script>
  <script src="/lib/events.js"></script>
  <script src="/app/SolariTexture.js"></script>
  <script src="/app/SolariRow.js"></script>
  <script src="/app/SolariFlap.js"></script>
  <script src="/app/Solari.js"></script>
  <script src="/client.js" defer></script>
  <script>
  (function () {
  var board = window.Board = new Solari;
  new SolariTexture().bind('load', function () {
    var alphaSet = this,
        row;

    document.getElementById('container').appendChild(board.el);

    // Screen size 
    var cols= 24;
    var rows = 8;
    
    // Set up the board
    _(rows).times(function () {
      row = new SolariRow(board.y);

      _(cols).times(function () {
        row.add(alphaSet);
      });
      board.add(row);
    });

    Board.start();
    
    // Test wordwrap 
     function wordWrap(str, charMax) {
        let arr = [];
        let space = /\s/;

        const words = str.split(space);
        // push first word into new array
        if (words[0].length) {
            arr.push(words[0]);
        }

        for (let i = 1; i < words.length; i++) {
            if (words[i].length + arr[arr.length - 1].length < charMax) {
                arr[arr.length - 1] = `${arr[arr.length - 1]} ${words[i
                ]}`;
            } else {
                arr.push(words[i]);
            }
        }

        //console.log('arr', arr);
        return arr;
    }

    var test_string = "What I am needing is to split up the string they input based on 27 characters yes always less than 27 words. View all";
    
    // Set a message
    setTimeout(function () {
      Board.setMessage(wordWrap(currentMessage.toUpperCase(),cols))
    }, 2000);
  }).load('https://cdn.glitch.com/0ed38d3c-4987-4983-a3f0-2347c4bf05e6%2Fchars.png?v=1579171572413', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-.# '.split(''), 70, 63);

  })();
  </script>
  <style>
  *{
    margin:0;
    padding:0;
    overflow:hidden;
  }
  body{
    background:#111;
  }
  </style>
</body>
</html>
